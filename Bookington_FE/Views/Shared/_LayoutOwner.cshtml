@using Bookington_FE.Models.ResponseModel;
@{
    var viewModel = (MainLayoutViewModel)ViewBag.MainLayoutViewModel;
    //var viewModel2 = ViewData["MainLayoutViewModel"] as MainLayoutViewModel;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href=@Url.Content("~/Asset/css/style3.css")>
    <link rel="stylesheet" href=@Url.Content("~/Asset/css/style4.css")>
    <link rel="stylesheet" href=@Url.Content("~/Asset/css/Notification.css")>
    <!--  Add following stylesheets to <head> tag  -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" data-rocket-async="style" as="style" onload="this.onload=null;this.rel='stylesheet'" onerror="this.removeAttribute('data-rocket-async')" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!--dropdown-->
    @*<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>*@

    <title>Home</title>
</head>
<body>
    <header>
        <nav>
            <div class="logo"> BOOKINGTON </div>
            <div class="notification">

                <style>
                    a {
                        text-decoration: none;
                        color: black;
                    }

                        a:visited {
                            color: black;
                        }

                    .box::-webkit-scrollbar-track {
                        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
                        background-color: #F5F5F5;
                        border-radius: 5px
                    }

                    .box::-webkit-scrollbar {
                        width: 10px;
                        background-color: #F5F5F5;
                        border-radius: 5px
                    }

                    .box::-webkit-scrollbar-thumb {
                        background-color: black;
                        border: 2px solid black;
                        border-radius: 5px
                    }

                    header {
                        -moz-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
                        vertical-align: middle;
                    }

                    h1 {
                        float: left;
                        padding: 10px 30px
                    }

                    body {
                        margin: 0;
                        padding: 0;
                        font-family: 'Raleway', sans-serif;
                    }

                    .icons {
                        display: inline;
                        float: right
                    }

                    .notification {
                        padding-top: 15px;
                        position: relative;
                        display: inline-block;
                    }

                    .number {
                        height: 22px;
                        width: 22px;
                        background-color: #d63031;
                        border-radius: 20px;
                        color: white;
                        text-align: center;
                        position: absolute;
                        top: 10px;
                        left: 60px;
                        padding: 1px;
                        border-style: solid;
                        border-width: 2px;
                    }

                        .number:empty {
                            display: none;
                        }

                    .notBtn {
                        transition: 0.5s;
                        cursor: pointer
                    }

                    .fas {
                        font-size: 25pt;
                        padding-bottom: 10px;
                        color: white;
                        margin-right: 40px;
                        margin-left: 40px;
                    }

                    .box {
                        width: 400px;
                        height: 0px;
                        border-radius: 10px;
                        transition: 0.5s;
                        position: absolute;
                        overflow-y: scroll;
                        padding: 0px;
                        left: -300px;
                        margin-top: 5px;
                        background-color: #F4F4F4;
                        -webkit-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.2);
                        -moz-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
                        box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
                        cursor: context-menu;
                    }

                    .fas:hover {
                        color: #d63031;
                    }

                    .notBtn:hover > .box {
                        height: 60vh
                    }

                    .content {
                        padding: 20px;
                        color: black;
                        vertical-align: middle;
                        text-align: left;
                    }

                    .gry {
                        background-color: #F4F4F4;
                    }

                    .top {
                        color: black;
                        padding: 10px
                    }

                    .display {
                        position: relative;
                    }

                    .cont {
                        position: absolute;
                        top: 0;
                        width: 100%;
                        height: 100%;
                        background-color: #F4F4F4;
                    }

                        .cont:empty {
                            display: block;
                        }

                    .stick {
                        text-align: center;
                        display: block;
                        font-size: 50pt;
                        padding-top: 70px;
                        padding-left: 80px
                    }

                        .stick:hover {
                            color: black;
                        }

                    .cent {
                        text-align: center;
                        display: block;
                    }

                    .sec {
                        padding: 25px 10px;
                        background-color: lightblue;
                        border-style: none none solid none;
                        border-color: slategray;
                        transition: 0.5s;
                    }


                    .txt {
                        vertical-align: top;
                        font-size: 1.25rem;
                        padding: 5px 10px 0px 115px;
                    }

                    .sub {
                        font-size: 1rem;
                        color: grey;
                    }

                    .new {
                        background-color: white;
                        border-color: red;
                    }

                    .sec:hover {
                        background-color: #BFBFBF;
                    }

                </style>
                <a href="#">
                    @{
                        int newNoti = 0;
                        if (viewModel != null && viewModel.ArrayNotification != null && viewModel.ArrayNotification.Count > 0)
                        {
                            foreach (NotificationModel ite in viewModel.ArrayNotification)
                            {
                                if (!ite.IsRead)
                                    newNoti += 1;
                            }
                        }

                    }
                    <div class="notBtn" href="#">
                        <!--Number supports double digets and automaticly hides itself when there is nothing between divs -->
                        <div class="number" id="num_noti"><span>@newNoti</span></div>
                        <i class="fas fa-bell"></i>
                        <div class="box">
                            <div class="display">
                                <div class="nothing">
                                    <i class="fas fa-child stick"></i>
                                    <div class="cent">Looks Like your al</div>
                                </div>
                               
                                <div class="cont">
                                    <div class="cent" onclick="MarkAll('@string.Join(',',viewModel?.ArrayNotification?.Where(x => x.IsRead == false)?.Select(y => y.Id))')" style="cursor:pointer; background: blue; color: white">Mark all as read</div>
                                    <hr>
                                    @if (viewModel != null && viewModel.ArrayNotification != null && viewModel.ArrayNotification.Count > 0)
                                    {
                                        foreach (NotificationModel ite in viewModel.ArrayNotification)
                                        {
                                            if (!ite.IsRead)
                                            {

                                                <div onclick="notiRead('@ite.Id', '@ite.IsRead')" style="cursor:pointer">
                                                    <div class="new sec" id="@ite.Id">

                                                        @ite.Content
                                                        <div style="font-size: 1rem;color: grey;">
                                                            @ite.CreateAt
                                                        </div>


                                                    </div>
                                                </div>
                                            }
                                            else
                                            {

                                                <div class="sec" id="@ite.Id">

                                                    @ite.Content
                                                    <div style="font-size: 1rem;color: grey;">
                                                        @ite.CreateAt
                                                    </div>

                                                </div>

                                            }

                                        }
                                        <hr>


                                    }

                                    <!-- Fold this div and try deleting evrything inbetween -->
                                </div>

                            </div>
                        </div>
                    </div>
                </a>
            </div>

        </nav>
    </header>
    <div class="wrapper">
        <div class="sidebar">
            <h2>HELLO OWNER</h2>

            <div class="tab">
                @using (Html.BeginForm("Dashboard", "Owner", FormMethod.Post))
                {
                    <button type="submit">
                        <i class="fa-solid fa-table-columns"></i>
                        Dashboard
                    </button>
                }
                @using (Html.BeginForm("History", "Owner", FormMethod.Post))
                {
                    <button type="submit">
                        <i class="fa-solid fa-clock"></i>
                        History
                    </button>
                }


                @using (Html.BeginForm("Profile", "Owner", FormMethod.Post))
                {
                    <button type="submit">
                        <i class="fa-solid fa-address-card"></i>
                        Profile
                    </button>
                }
                @using (Html.BeginForm("ManageYard", "Owner", FormMethod.Post))
                {
                    <button type="submit">
                        <i class="fa-sharp fa-solid fa-table"></i>
                        Manage Court
                    </button>
                }
                @*@using (Html.BeginForm("Chat", "Owner", FormMethod.Post))
                {
                <button type="submit">
                <i class="fa-solid fa-comment"></i>
                Chat
                </button>
                }*@
                @*@using (Html.BeginForm("Competition", "Owner", FormMethod.Post))
                {
                <button type="submit">
                <i class="fa-regular fa-handshake"></i>
                Upcomming Match
                </button>
                }*@
                @using (Html.BeginForm("Logout", "Owner", FormMethod.Post))
                {
                    <button type="submit">
                        <i class="fa-solid fa-right-from-bracket"></i>
                        Logout
                    </button>
                }

            </div>


        </div>
        <div class="main_content">
            @RenderBody()
        </div>
    </div>

    <script type="text/javascript" src=@Url.Content("~/Asset/js/tab.js")></script>
    <script type="text/javascript" src=@Url.Content("~/Asset/js/site.js")></script>
    <script type="text/javascript" src=@Url.Content("~/Asset/js/jquery-2.1.4.min.js")></script>
    <script type="text/javascript" src=@Url.Content("~/Asset/js/notification.js")></script>

    @*<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>*@
    @*    <script src=@Url.Content("~/lib/jquery/dist/jquery.min.js")></script>
    *@
    <script src=@Url.Content("~/Asset/lib/bootstrap/dist/js/bootstrap.bundle.min.js")></script>
    <script src=@Url.Content("~/Asset/lib/bootstrap/dist/js/bootstrap.min.js")></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://kit.fontawesome.com/0e8d7b26ea.js" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/yourcode.js"></script>
    @await RenderSectionAsync("Scripts", required: false)

</body>
</html>